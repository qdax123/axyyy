(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f8c6f9be"],{"0f2a":function(t,s,i){"use strict";i("ab8b")},"1d38":function(t,s,i){"use strict";i("7025")},2253:function(t,s,i){"use strict";var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"album"},t._l(t.albumList,(function(i){return s("router-link",{key:i.id,staticClass:"item",attrs:{to:{path:"/album",query:{id:i.id}}}},[s("div",{staticClass:"faceImg"},[s("el-image",{attrs:{src:i.picUrl+"?param=120y120"}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[s("i",{staticClass:"iconfont icon-placeholder"})])])],1),s("div",{staticClass:"info"},[s("div",{staticClass:"album-type"},[t._v(t._s(i.type))]),i.name?s("div",{staticClass:"album-name"},[t._v(t._s(i.name))]):t._e(),i.artist?s("div",{staticClass:"artist-name"},[t._v(t._s(i.artist.name))]):t._e()])])})),1)},e=[],o={components:{},props:["albumList"],data(){return{}},computed:{},methods:{}},l=o,r=(i("6b37"),i("2877")),n=Object(r["a"])(l,a,e,!1,null,"1b093cfc",null);s["a"]=n.exports},2824:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"singer"},[s("div",{staticClass:"w1200"},[s("div",{staticClass:"singer-info"},[s("div",{staticClass:"singer-avatar"},[s("el-image",{attrs:{src:t.artist.img1v1Url}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[s("i",{staticClass:"iconfont icon-placeholder"})])])],1),s("div",{staticClass:"singer-desc"},[s("div",{staticClass:"singer-author"},[s("div",{staticClass:"singer-name"},[t._v(t._s(t.artist.name))]),t.artist.accountId?s("router-link",{staticClass:"singer-btn singer-home",attrs:{to:{path:"/user",query:{id:t.artist.accountId}}}},[s("i",{staticClass:"iconfont icon-home"}),t._v(" 个人主页")]):t._e(),s("span",{class:["singer-btn","singer-collect",t.artist.followed?"active":""],on:{click:function(s){return t.getArtistSub(t.artist.followed?0:1)}}},[s("i",{class:["iconfont","icon-collect"+(t.artist.followed?"-active":"")]}),t._v(" "+t._s(t.artist.followed?"已收藏":"收藏"))])],1),s("div",{staticClass:"singer-brief"},[t._v(t._s(t.artist.briefDesc?t.artist.briefDesc:"暂无简介")+" "),t.introduction.length?s("span",{on:{click:t.moreDesc}},[t._v("更多>>")]):t._e()])])])]),s("div",{staticClass:"singer-main"},[s("div",{staticClass:"w1200"},[s("div",{staticClass:"singer-hd"},[s("em",[t._v("作品集")]),s("div",{staticClass:"singer-tab"},[s("span",{class:["hot"===t.type?"active":""],on:{click:function(s){return t.changeType("hot")}}},[t._v("热门作品")]),s("span",{class:["album"===t.type?"active":""],on:{click:function(s){return t.changeType("album")}}},[t._v("所有专辑")]),s("span",{class:["mv"===t.type?"active":""],on:{click:function(s){return t.changeType("mv")}}},[t._v("相关MV")])]),"hot"===t.type?s("div",{staticClass:"singer-oper"},[s("span",{staticClass:"singer-btn playAll",on:{click:t.playAllList}},[s("i",{staticClass:"iconfont icon-audio-play"}),t._v(" 播放全部")]),s("span",{staticClass:"singer-btn addAll",on:{click:t.addAll}},[s("i",{staticClass:"iconfont icon-add"}),t._v(" 添加到播放列表")]),s("span",{staticClass:"singer-btn collectAll",on:{click:t.collectAll}},[s("i",{staticClass:"iconfont icon-collect"}),t._v(" 收藏热门")])]):t._e()]),s("div",{staticClass:"singer-list"},[s("song-list",{directives:[{name:"show",rawName:"v-show",value:"hot"===t.type,expression:"type === 'hot'"}],attrs:{songList:t.hotSongs,stripe:!0}}),s("album-list",{directives:[{name:"show",rawName:"v-show",value:"album"===t.type,expression:"type === 'album'"}],attrs:{albumList:t.hotAlbums}}),s("mv-list",{directives:[{name:"show",rawName:"v-show",value:"mv"===t.type,expression:"type === 'mv'"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMv,expression:"loadMv"}],staticClass:"loadMv",attrs:{mvList:t.hotMvs,"infinite-scroll-disabled":t.isLoadMv,"infinite-scroll-distance":"20"}}),t.isLoading?[s("Loading")]:t._e()],2),"album"===t.type?s("div",{staticClass:"pagination"},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.limit,total:t.total},on:{"current-change":t.currentChange}})],1):t._e()])]),s("el-dialog",{attrs:{title:t.artist.name,visible:t.dialogDescVisible,"destroy-on-close":!0},on:{"update:visible":function(s){t.dialogDescVisible=s}}},[s("div",{staticClass:"artist-desc-main"},[s("dl",{staticClass:"introduction"},[s("dt",[t._v("艺人介绍")]),s("dd",[t._v(t._s(t.artist.briefDesc))])]),t._l(t.introduction,(function(i,a){return s("dl",{key:a,staticClass:"introduction"},[s("dt",[t._v(t._s(i.ti))]),s("dd",[t._v(t._s(i.txt))])])}))],2)])],1)},e=[],o=(i("14d9"),i("2f62")),l=i("18fd"),r=i("2253"),n=i("57b7"),c=i("bf93"),d={name:"Singer",components:{songList:l["a"],albumList:r["a"],mvList:n["a"],Loading:c["a"]},data(){return{sUid:this.$route.query.id,artist:{},hotSongs:[],hotAlbums:[],hotMvs:[],introduction:[],type:this.$route.query.type||"hot",limit:12,offset:0,total:0,hasMoreMvs:!0,timer:null,dialogDescVisible:!1,isLoading:!0,isLoadMv:!0}},computed:{...Object(o["c"])(["playList"])},mounted(){this.init(),this.$route.query.type&&this.getArtists()},methods:{...Object(o["d"])({setPlayStatus:"SET_PLAYSTATUS",setPlayList:"SET_PLAYLIST",setPlayListTips:"setPlayListTips",setPlayIndex:"SET_PLAYINDEX"}),async getArtistDesc(){const{data:t}=await this.$http.artistDesc({id:this.sUid,timestamp:(new Date).valueOf()});if(200!==t.code)return this.$msg.error("数据请求失败");this.introduction=t.introduction},async getArtists(){this.isLoading=!0;const{data:t}=await this.$http.artists({id:this.sUid,timestamp:(new Date).valueOf()});if(200!==t.code)return this.$msg.error("数据请求失败");this.artist=t.artist,this.hotSongs=t.hotSongs.map(t=>({id:String(t.id),name:t.name,mvId:t.mv,singer:t.ar,album:t.al,alia:t.alia,vip:1===t.fee,license:t.license,duration:this.$utils.formatSongTime(t.dt),url:`https://music.163.com/song/media/outer/url?id=${t.id}.mp3`,publishTime:this.$utils.formatMsgTime(t.publishTime)})),this.isLoading=!1},async getArtistSub(t){const{data:s}=await this.$http.artistSub({id:this.sUid,t:t});if(200!==s.code)return this.$msg.error("数据请求失败");this.$msg.success("操作成功"),this.getArtists()},async getArtistAlbum(){this.isLoading=!0;const{data:t}=await this.$http.artistAlbum({id:this.sUid,limit:this.limit,offset:this.offset});if(200!==t.code)return this.$msg.error("数据请求失败");this.total=t.artist.albumSize,this.hotAlbums=t.hotAlbums,this.isLoading=!1},async getArtistMv(){if(console.log(this.isLoadMv),!this.hasMoreMvs||!this.isLoadMv)return;this.isLoading=!0,this.isLoadMv=!1;const{data:t}=await this.$http.artistMv({id:this.sUid,limit:20,offset:this.offset});if(200!==t.code)return this.$msg.error("数据请求失败");this.hasMoreMvs=t.hasMore,this.hotMvs=[...this.hotMvs,...t.mvs],this.isLoading=t.hasMore,this.isLoadMv=!0,this.offset+=20},loadMv(){this.getArtistMv()},moreDesc(){this.dialogDescVisible=!0},changeType(t){const s={id:this.sUid};switch(this.type=t,this.offset=0,this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":this.hotMvs=[],this.hasMoreMvs=!0,this.getArtistMv();break}"hot"!==t&&(s.type=this.type),this.$router.push({path:"singer",query:s})},currentChange(t){this.offset=(t-1)*this.limit,this.getArtistAlbum()},init(){switch(this.sUid=this.$route.query.id,this.getArtistDesc(),this.type){case"hot":this.getArtists();break;case"album":this.getArtistAlbum();break;case"mv":break}},playAllList(){this.playAll({list:this.hotSongs})},addAll(){this.addList({list:this.hotSongs}),this.setPlayListTips({flag:!0,txt:"已添加到播放列表"}),clearTimeout(this.timer),this.timer=setTimeout(()=>{this.setPlayListTips({flag:!1,txt:"已添加到播放列表"})},2e3)},collectAll(){},...Object(o["b"])(["playAll","addList"])},watch:{$route:{handler(){this.sUid=this.$route.query.id},deep:!0},sUid(t,s){this.type=this.$route.query.type||"hot",this.getArtists()}},beforeDestroy(){clearTimeout(this.timer)}},h=d,u=(i("1d38"),i("2877")),m=Object(u["a"])(h,a,e,!1,null,"2a1fd51a",null);s["default"]=m.exports},"57b7":function(t,s,i){"use strict";var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"mv"},t._l(t.mvList,(function(i,a){return s("div",{key:""+i.id+a,staticClass:"item"},[s("router-link",{staticClass:"faceImg",attrs:{to:{path:"/mv",query:{id:i.id}}}},[s("i",{staticClass:"iconfont icon-play"}),s("el-image",{attrs:{src:i.cover||i.imgurl}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[s("i",{staticClass:"iconfont icon-placeholder"})])])],1),s("div",{staticClass:"info"},[s("router-link",{staticClass:"mv-name",attrs:{to:{path:"/mv",query:{id:i.id}}}},[t._v(t._s(i.name))]),i.publishTime?t._e():s("router-link",{staticClass:"mv-author",attrs:{to:{path:"/singer",query:{id:i.artistId}}}},[t._v(t._s(i.artistName))]),s("div",{staticClass:"mv-playCount"},[s("i",{staticClass:"iconfont icon-video"}),t._v(" "+t._s(t.$utils.formartNum(i.playCount)))]),i.publishTime?s("div",{staticClass:"mv-time"},[t._v("发布时间："+t._s(i.publishTime))]):t._e()],1)],1)})),0)},e=[],o={components:{},props:["mvList"],data(){return{}},computed:{},methods:{}},l=o,r=(i("0f2a"),i("2877")),n=Object(r["a"])(l,a,e,!1,null,"05b0808c",null);s["a"]=n.exports},"5b0d":function(t,s,i){},"6b37":function(t,s,i){"use strict";i("5b0d")},7025:function(t,s,i){},ab8b:function(t,s,i){}}]);
//# sourceMappingURL=chunk-f8c6f9be.11fa3cf3.js.map