{"version":3,"sources":["webpack:///./src/views/playlist/detail.vue","webpack:///src/views/playlist/detail.vue","webpack:///./src/views/playlist/detail.vue?7d35","webpack:///./src/views/playlist/detail.vue?6256","webpack:///./src/views/playlist/detail.vue?3f64"],"names":["render","_vm","this","_c","_self","staticClass","attrs","details","coverImgUrl","slot","_v","_s","name","creator","avatarUrl","nickname","$utils","formartDate","createTime","_e","tags","_l","tag","index","key","path","query","cat","formartNum","playCount","subscribedCount","commentCount","isShowDesc","on","$event","domProps","description","showAllDesc","total","playAllSongs","class","subscribed","subPlayList","isLoading","songList","isLogin","loginDialog","collects","item","userId","id","playlists","comments","commentId","user","formatMsgTime","time","content","staticRenderFns","components","Loading","mounted","_initialize","$route","data","computed","mapGetters","methods","mapMutations","setPlayStatus","setPlayList","setPlayIndex","mapActions","getDetail","s","getCollect","limit","getRecom","getComment","params","res","$http","playlistdetail","code","$msg","error","playlist","ids","trackIds","getAllSongs","_formatSongs","tracks","length","playlistSCollect","subscribers","playlistRelated","playlistComment","sliceArr","num","idsArr","push","slice","i","arrs","map","d","songDetail","join","timestamp","Date","valueOf","concat","$store","dispatch","list","ret","songs","license","privileges","cp","formatSongInfo","playAll","t","watch","newId","oldId","newVal","oldVal","component"],"mappings":"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","file":"js/chunk-3141b22c.e208b605.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"w1200\"},[_c('div',{staticClass:\"detail-container\"},[_c('div',{staticClass:\"detail-main\"},[_c('div',{staticClass:\"cover\"},[_c('div',{staticClass:\"cover-img\"},[_c('el-image',{attrs:{\"src\":_vm.details.coverImgUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])])],1),_c('div',{staticClass:\"cover-info\"},[_c('div',{staticClass:\"cover-title\"},[_vm._v(\" \"+_vm._s(_vm.details.name)+\" \")]),(_vm.details.creator)?_c('div',{staticClass:\"cover-author\"},[_c('el-image',{staticClass:\"cover-avatar\",attrs:{\"src\":_vm.details.creator.avatarUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])]),_c('div',{staticClass:\"cover-name\"},[_vm._v(_vm._s(_vm.details.creator.nickname))]),_c('div',{staticClass:\"cover-date\"},[_vm._v(_vm._s(_vm.$utils.formartDate(_vm.details.createTime, 'yyyy-MM-dd')))])],1):_vm._e(),(_vm.details.tags)?_c('div',{staticClass:\"cover-tags\"},_vm._l((_vm.details.tags),function(tag,index){return _c('router-link',{key:index,staticClass:\"tag\",attrs:{\"to\":{ path: '/playlist', query: { cat: tag }}}},[_vm._v(\"#\"+_vm._s(tag))])}),1):_vm._e(),_c('div',{staticClass:\"cover-digital\"},[_c('span',{staticClass:\"cover-playCount\"},[_c('i',{staticClass:\"iconfont icon-playnum\"}),_vm._v(\" \"+_vm._s(_vm.$utils.formartNum(_vm.details.playCount))+\"次\")]),_c('span',{staticClass:\"cover-collect\"},[_c('i',{staticClass:\"iconfont icon-collect\"}),_vm._v(\" \"+_vm._s(_vm.$utils.formartNum(_vm.details.subscribedCount)))]),_c('span',{staticClass:\"cover-comment\"},[_c('i',{staticClass:\"iconfont icon-comment\"}),_vm._v(\" \"+_vm._s(_vm.$utils.formartNum(_vm.details.commentCount)))])]),_c('div',{staticClass:\"cover-desc\"},[_c('h5',[_vm._v(\"歌单简介\"),(_vm.isShowDesc)?_c('em',{staticClass:\"desc-close\",on:{\"click\":function($event){_vm.isShowDesc = false}}},[_c('i',{staticClass:\"iconfont icon-closed\"})]):_vm._e()]),_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.details.description)},on:{\"click\":_vm.showAllDesc}}),(_vm.isShowDesc)?_c('pre',{staticClass:\"cover-desc-all\"},[_vm._v(\"                                \"+_vm._s(_vm.details.description)+\"\\n                            \")]):_vm._e()])])]),_c('div',{staticClass:\"song-main\"},[_c('div',{staticClass:\"song-header\"},[_c('h4',[_vm._v(\"歌曲列表 \"),_c('em',[_vm._v(_vm._s(_vm.total + '首歌'))])]),_c('span',{staticClass:\"play-all\",on:{\"click\":_vm.playAllSongs}},[_c('i',{staticClass:\"iconfont icon-audio-play\"}),_vm._v(\" 播放全部\")]),_c('span',{class:['collect', _vm.details.subscribed ? 'active' : ''],on:{\"click\":function($event){return _vm.subPlayList(_vm.details)}}},[_c('i',{class:['iconfont', 'icon-collect' + (_vm.details.subscribed ? '-active' : '')]}),_vm._v(\" \"+_vm._s(_vm.details.subscribed ? '已收藏' : '收藏'))])]),(_vm.isLoading)?[_c('Loading')]:[_c('song-list',{attrs:{\"songList\":_vm.songList,\"stripe\":true}}),(!_vm.isLogin)?_c('div',{staticClass:\"showAllSongsTips\"},[_c('span',{on:{\"click\":_vm.loginDialog}},[_vm._v(\"登录后查看全部歌曲\")])]):_vm._e()]],2)]),_c('div',{staticClass:\"detail-aside\"},[_c('div',{staticClass:\"playlist-collect\"},[_c('h3',{staticClass:\"aside-title\"},[_vm._v(\"喜欢这个歌单的人\")]),_c('div',{staticClass:\"aside-main collect-main\"},_vm._l((_vm.collects),function(item){return _c('router-link',{key:item.userId,staticClass:\"collect-author\",attrs:{\"to\":{ path: '/singer', query: { id: item.userId }}}},[_c('el-image',{attrs:{\"src\":item.avatarUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])])],1)}),1)]),_c('div',{staticClass:\"playlist-recom\"},[_c('h3',{staticClass:\"aside-title\"},[_vm._v(\"相关歌单推荐\")]),_c('div',{staticClass:\"aside-main recom-main\"},_vm._l((_vm.playlists),function(item){return _c('router-link',{key:item.id,staticClass:\"recom-item\",attrs:{\"to\":{ path: '/playlist/detail', query: { id: item.id }}}},[_c('el-image',{attrs:{\"src\":item.coverImgUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])]),_c('div',{staticClass:\"recom-info\"},[_c('div',{staticClass:\"recom-name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"recom-author\"},[_vm._v(\" By. \"),_c('router-link',{attrs:{\"to\":{ path: '/user', query: { id: item.creator.userId }}}},[_vm._v(_vm._s(item.creator.nickname))])],1)])],1)}),1)]),_c('div',{staticClass:\"playlist-comment\"},[_c('h3',{staticClass:\"aside-title\"},[_vm._v(\"歌单评论\")]),_c('div',{staticClass:\"aside-main comment-main\"},_vm._l((_vm.comments),function(item){return _c('div',{key:item.commentId,staticClass:\"comment-item\"},[_c('router-link',{attrs:{\"to\":{ path: '/user', query: { id: item.commentId }}}},[_c('el-image',{attrs:{\"src\":item.user.avatarUrl}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_c('i',{staticClass:\"iconfont icon-placeholder\"})])])],1),_c('div',{staticClass:\"comment-info\"},[_c('div',{staticClass:\"comment-userInfo\"},[_c('router-link',{staticClass:\"comment-name\",attrs:{\"to\":{ path: '/user', query: { id: item.commentId }}}},[_vm._v(_vm._s(item.user.nickname))]),_c('span',{staticClass:\"comment-date\"},[_vm._v(_vm._s(_vm.$utils.formatMsgTime(item.time)))])],1),_c('div',{staticClass:\"comment-desc\"},[_vm._v(_vm._s(item.content))])])],1)}),0)])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class='detail'>\n        <div class=\"w1200\">\n            <div class=\"detail-container\">\n                <div class=\"detail-main\">\n                    <div class=\"cover\">\n                        <div class=\"cover-img\">\n                            <el-image :src=\"details.coverImgUrl\">\n                                <div slot=\"placeholder\" class=\"image-slot\">\n                                    <i class=\"iconfont icon-placeholder\"></i>\n                                </div>\n                            </el-image>\n                        </div>\n                        <div class=\"cover-info\">\n                            <div class=\"cover-title\">\n                                {{details.name}}\n                            </div>\n                            <div class=\"cover-author\" v-if=\"details.creator\">\n                                <el-image :src=\"details.creator.avatarUrl\" class=\"cover-avatar\">\n                                    <div slot=\"placeholder\" class=\"image-slot\">\n                                        <i class=\"iconfont icon-placeholder\"></i>\n                                    </div>\n                                </el-image>\n                                <div class=\"cover-name\">{{details.creator.nickname}}</div>\n                                <div class=\"cover-date\">{{$utils.formartDate(details.createTime, 'yyyy-MM-dd')}}</div>\n                            </div>\n                            <div class=\"cover-tags\" v-if=\"details.tags\">\n                                <router-link :to=\"{ path: '/playlist', query: { cat: tag }}\" class=\"tag\" v-for=\"(tag, index) in details.tags\" :key=\"index\">#{{tag}}</router-link>\n                            </div>\n                            <div class=\"cover-digital\">\n                                <span class=\"cover-playCount\"><i class=\"iconfont icon-playnum\"></i> {{$utils.formartNum(details.playCount)}}次</span>\n                                <span class=\"cover-collect\"><i class=\"iconfont icon-collect\"></i> {{$utils.formartNum(details.subscribedCount)}}</span>\n                                <span class=\"cover-comment\"><i class=\"iconfont icon-comment\"></i> {{$utils.formartNum(details.commentCount)}}</span>\n                            </div>\n                            <div class=\"cover-desc\">\n                                <h5>歌单简介<em class=\"desc-close\" v-if=\"isShowDesc\" @click=\"isShowDesc = false\"><i class=\"iconfont icon-closed\"></i></em></h5>\n                                <p v-html=\"details.description\" @click=\"showAllDesc\"></p>\n                                <pre class=\"cover-desc-all\" v-if=\"isShowDesc\">\n                                    {{details.description}}\n                                </pre>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"song-main\">\n                        <div class=\"song-header\">\n                            <h4>歌曲列表 <em>{{total + '首歌'}}</em></h4>\n                            <span class=\"play-all\" @click=\"playAllSongs\"><i class=\"iconfont icon-audio-play\"></i> 播放全部</span>\n                            <span :class=\"['collect', details.subscribed ? 'active' : '']\" @click=\"subPlayList(details)\"><i :class=\"['iconfont', 'icon-collect' + (details.subscribed ? '-active' : '')]\"></i> {{ details.subscribed ? '已收藏' : '收藏'}}</span>\n                        </div>\n                        <template v-if=\"isLoading\">\n                            <Loading />\n                        </template>\n                        <template v-else>\n                            <song-list :songList=\"songList\" :stripe=\"true\"></song-list>\n                            <div class=\"showAllSongsTips\" v-if=\"!isLogin\">\n                                <span @click=\"loginDialog\">登录后查看全部歌曲</span>\n                            </div>\n                        </template>\n                    </div>\n                </div>\n                <div class=\"detail-aside\">\n                    <div class=\"playlist-collect\">\n                        <h3 class=\"aside-title\">喜欢这个歌单的人</h3>\n                        <div class=\"aside-main collect-main\">\n                            <router-link class=\"collect-author\" :to=\"{ path: '/singer', query: { id: item.userId }}\" v-for=\"item in collects\" :key=\"item.userId\">\n                                <el-image :src=\"item.avatarUrl\">\n                                    <div slot=\"placeholder\" class=\"image-slot\">\n                                        <i class=\"iconfont icon-placeholder\"></i>\n                                    </div>\n                                </el-image>\n                            </router-link>\n                        </div>\n                    </div>\n                    <div class=\"playlist-recom\">\n                        <h3 class=\"aside-title\">相关歌单推荐</h3>\n                        <div class=\"aside-main recom-main\">\n                            <router-link class=\"recom-item\" :to=\"{ path: '/playlist/detail', query: { id: item.id }}\" v-for=\"item in playlists\" :key=\"item.id\">\n                                <el-image :src=\"item.coverImgUrl\">\n                                    <div slot=\"placeholder\" class=\"image-slot\">\n                                        <i class=\"iconfont icon-placeholder\"></i>\n                                    </div>\n                                </el-image>\n                                <div class=\"recom-info\">\n                                    <div class=\"recom-name\">{{item.name}}</div>\n                                    <div class=\"recom-author\">\n                                        By. <router-link :to=\"{ path: '/user', query: { id: item.creator.userId }}\">{{ item.creator.nickname }}</router-link>\n                                    </div>\n                                </div>\n                            </router-link>\n                        </div>\n                    </div>\n                    <div class=\"playlist-comment\">\n                        <h3 class=\"aside-title\">歌单评论</h3>\n                        <div class=\"aside-main comment-main\">\n                            <div class=\"comment-item\" v-for=\"item in comments\" :key=\"item.commentId\">\n                                <router-link :to=\"{ path: '/user', query: { id: item.commentId }}\">\n                                    <el-image :src=\"item.user.avatarUrl\">\n                                        <div slot=\"placeholder\" class=\"image-slot\">\n                                            <i class=\"iconfont icon-placeholder\"></i>\n                                        </div>\n                                    </el-image>\n                                </router-link>\n                                <div class=\"comment-info\">\n                                    <div class=\"comment-userInfo\"><router-link :to=\"{ path: '/user', query: { id: item.commentId }}\" class=\"comment-name\">{{item.user.nickname}}</router-link><span class=\"comment-date\">{{$utils.formatMsgTime(item.time)}}</span></div>\n                                    <div class=\"comment-desc\">{{item.content}}</div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\nimport { formatSongInfo } from '@utils/song'\nimport songList from '@components/common/song-list'\nimport Loading from '@components/common/loading'\nexport default {\n    name: 'PlayListDetail',\n    components: {\n        songList,\n        Loading\n    },\n    mounted () {\n        this._initialize(this.$route.query.id)\n    },\n    data () {\n        // 这里存放数据\n        return {\n            // 歌单详情\n            details: {},\n            songList: [],\n            collects: [],\n            playlists: [],\n            comments: [],\n            total: 0,\n            isLoading: true,\n            isShowDesc: false\n        }\n    },\n    // 监听属性 类似于data概念\n    computed: {\n        ...mapGetters(['isLogin', 'playList'])\n    },\n    // 方法集合\n    methods: {\n        ...mapMutations({\n            setPlayStatus: 'SET_PLAYSTATUS',\n            setPlayList: 'SET_PLAYLIST',\n            setPlayIndex: 'SET_PLAYINDEX'\n        }),\n        ...mapActions(['loginSuc', 'playAll']),\n        _initialize (id) {\n            // 歌单详情\n            this.getDetail({ id: id, s: 8 })\n            // 歌单收藏者\n            this.getCollect({ id: id, limit: 18 })\n            // 相关歌单推荐\n            this.getRecom({ id: id })\n            // // 歌单评论\n            this.getComment({ id: id, limit: 9 })\n        },\n        // 登录及未登录下获取歌单中歌曲的列表\n        async getDetail (params) {\n            this.isLoading = true\n            const { data: res } = await this.$http.playlistdetail(params)\n\n            if (res.code !== 200) {\n                return this.$msg.error('数据请求失败')\n            }\n\n            this.details = res.playlist\n\n            if (this.isLogin) {\n                const ids = res.playlist.trackIds\n\n                this.getAllSongs(ids)\n            } else {\n                this.songList = this._formatSongs(res.playlist.tracks)\n                this.total = this.songList.length\n                this.isLoading = false\n            }\n        },\n        // 订阅该歌单的用户列表\n        async getCollect (params) {\n            const { data: res } = await this.$http.playlistSCollect(params)\n\n            if (res.code !== 200) {\n                return this.$msg.error('数据请求失败')\n            }\n            this.collects = res.subscribers\n        },\n        // 相关歌单推荐\n        async getRecom (params) {\n            const { data: res } = await this.$http.playlistRelated(params)\n\n            if (res.code !== 200) {\n                return this.$msg.error('数据请求失败')\n            }\n            this.playlists = res.playlists\n        },\n        // 歌单精彩评论\n        async getComment (params) {\n            const { data: res } = await this.$http.playlistComment(params)\n\n            if (res.code !== 200) {\n                return this.$msg.error('数据请求失败')\n            }\n            this.comments = res.comments\n        },\n        // 歌单简介查看更多\n        showAllDesc () {\n            if (this.details.description.length > 120) {\n                this.isShowDesc = !this.isShowDesc\n            }\n        },\n        // 登录后根据ids获取所有歌曲列表\n        async getAllSongs (ids) {\n            const sliceArr = []\n            const num = 500\n            let idsArr = []\n\n            // 数组过长 每500份一组\n            for (let index = 0; index < ids.length; index += num) {\n                sliceArr.push(ids.slice(index, index + num))\n            }\n\n            for (let i = 0; i < sliceArr.length; i++) {\n                const arrs = []\n                sliceArr[i].map(d => {\n                    arrs.push(d.id)\n                })\n                this.isLoading = true\n                const { data: res } = await this.$http.songDetail({ ids: arrs.join(','), timestamp: new Date().valueOf() + i })\n\n                idsArr = idsArr.concat(this._formatSongs(res))\n            }\n\n            this.songList = idsArr\n            this.total = idsArr.length\n            this.isLoading = false\n        },\n        // 未登录状态，点击登录按钮，显示登录框\n        loginDialog () {\n            this.$store.dispatch('loginSuc', true)\n        },\n        // 处理歌曲\n        _formatSongs (list) {\n            const ret = []\n            list.songs.map((item, index) => {\n                if (item.id) {\n                    // 是否有版权播放\n                    item.license = !list.privileges[index].cp\n                    ret.push(formatSongInfo(item))\n                }\n            })\n            return ret\n        },\n        // 播放列表为当前歌单的全部歌曲\n        playAllSongs () {\n            this.playAll({\n                list: this.songList\n            })\n        },\n        // 收藏、取消歌单\n        async subPlayList (item) {\n            const { data: res } = await this.$http.subPlayList({ id: item.id, t: (item.subscribed ? 2 : 1) })\n\n            if (res.code !== 200) {\n                return this.$msg.error('数据请求失败')\n            }\n            this.details.subscribed = !this.details.subscribed\n        }\n    },\n    watch: {\n        $route (newId, oldId) {\n            const id = this.$route.query.id\n            if (id) {\n                this.songList = []\n                this.total = 0\n                this._initialize(id)\n            }\n        },\n        isLogin (newVal, oldVal) {\n            if (newVal) {\n                const ids = this.details.trackIds\n\n                this.getAllSongs(ids)\n            } else {\n                this.songList = this.details.tracks\n                this.total = this.details.tracks.length\n            }\n        }\n    }\n}\n</script>\n<style scoped lang=\"less\">\n.detail-container {\n    display: flex;\n    flex-direction: row;\n    flex: 1;\n    flex-basis: auto;\n    box-sizing: border-box;\n    padding: 40px 0 0 0;\n}\n.detail-main {\n    flex: 1;\n    padding-bottom: 100px;\n    overflow: hidden;\n}\n.detail-aside {\n    width: 300px;\n    padding-left: 20px;\n\n    .aside-title {\n        position: relative;\n        font-size: 16px;\n        line-height: 24px;\n\n        &::before {\n            content: '';\n            display: inline-block;\n            width: 4px;\n            height: 18px;\n            margin: 3px 5px 0 0;\n            border-radius: 2px;\n            background: @color-theme;\n            vertical-align: top;\n        }\n    }\n}\n.cover {\n    display: flex;\n}\n.cover-img {\n    position: relative;\n    width: 280px;\n    height: 280px;\n\n    &::after {\n        position: absolute;\n        top: 0;\n        left: 0;\n        z-index: -1;\n        width: 100%;\n        height: 100%;\n        content: '';\n        transform: scale(.95) translateX(5%);\n        background: #f0f0f0;\n    }\n}\n.cover-info {\n    flex: 1;\n    padding-left: 40px;\n\n    .cover-title {\n        font-size: 24px;\n        font-weight: bold;\n    }\n}\n.cover-author {\n    padding: 15px 0 10px;\n\n    .cover-avatar {\n        display: inline-block;\n        width: 32px;\n        height: 32px;\n        border-radius: 100%;\n        vertical-align: top;\n    }\n\n    .cover-name, .cover-date {\n        display: inline-block;\n        padding: 0 10px;\n        line-height: 32px;\n    }\n\n    .cover-date {\n        color: #999;\n    }\n}\n.cover-tags {\n    padding-bottom: 5px;\n    line-height: 16px;\n\n    .tag {\n        display: inline-block;\n        margin-right: 5px;\n        font-size: 12px;\n        color: @color-theme;\n    }\n}\n.cover-playCount, .cover-collect, .cover-comment {\n    display: inline-block;\n    padding: 0 20px 5px 0;\n    line-height: 16px;\n    font-size: 14px;\n    color: #999;\n\n    i {\n        vertical-align: top;\n    }\n}\n.cover-desc {\n    position: relative;\n\n    h5 {\n        padding: 30px 0 5px;\n        line-height: 20px;\n        font-size: 14px;\n        color: #333;\n    }\n\n    .desc-close {\n        position: absolute;\n        top: 30px;\n        right: 0;\n        cursor: pointer;\n    }\n\n    p {\n        line-height: 22px;\n        font-size: 14px;\n        color: #999;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 4;\n        -webkit-box-orient: vertical;\n        word-break: break-all;\n        cursor: pointer;\n    }\n\n    .cover-desc-all {\n        position: absolute;\n        top: 70px;\n        left: 10px;\n        z-index: 1;\n        width: calc(~'100% - 20px');\n        padding: 10px;\n        margin: -10px;\n        max-height: 250px;\n        line-height: 22px;\n        font-size: 14px;\n        white-space: pre-line;\n        font-family: inherit;\n        color: #999;\n        background: #fff;\n        overflow-y: scroll;\n        box-shadow: 0 2px 10px 0 rgba(52, 52, 52, 0.1);\n    }\n}\n\n.song-header {\n    display: flex;\n    padding: 30px 0 10px;\n\n    h4 {\n        flex: 1;\n        font-size: 20px;\n        line-height: 40px;\n\n        em {\n            display: inline-block;\n            padding-left: 10px;\n            font-size: 12px;\n            line-height: 14px;\n            font-style: normal;\n            font-weight: normal;\n            color: #666;\n            vertical-align: baseline;\n        }\n    }\n\n    span {\n        display: flex;\n        line-height: 16px;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50px;\n        padding: 7px 20px;\n        cursor: pointer;\n        margin: 5px 0 5px 15px;\n        transition: all .4s;\n        background: #f0f0f0;\n        color: #333;\n\n        i {\n            margin-right: 3px;\n        }\n    }\n\n    .play-all {\n        color: #fff;\n        background: @color-theme;\n\n        i {\n            color: #fff;\n        }\n    }\n\n    .collect.active, .collect.active i {\n        color: @color-theme;\n    }\n}\n\n.showAllSongsTips {\n    text-align: center;\n    padding: 40px 0;\n\n    span {\n        display: inline-block;\n        display: flex;\n        line-height: 16px;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50px;\n        padding: 7px 20px;\n        color: #fff;\n        background: @color-theme;\n        cursor: pointer;\n    }\n}\n\n.aside-main {\n    font-size: 0;\n    padding-bottom: 30px;\n\n    .collect-author {\n        display: inline-block;\n        width: 40px;\n        height: 40px;\n        margin: 10px 5px;\n        border-radius: 100%;\n        overflow: hidden;\n    }\n}\n\n.collect-main {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: space-between;\n    margin: 0 -10px;\n}\n.recom-main {\n    .el-image {\n        width: 60px;\n        height: 60px;\n        border-radius: 4px;\n        overflow: hidden;\n    }\n\n    .recom-item {\n        display: flex;\n        padding: 10px 0;\n    }\n\n    .recom-info {\n        flex: 1;\n        padding-left: 10px;\n    }\n\n    .recom-name {\n        width: 100%;\n        height: 20px;\n        line-height: 20px;\n        font-size: 14px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        display: -webkit-box;\n        -webkit-line-clamp: 1;\n        -webkit-box-orient: vertical;\n        word-break: break-all;\n        cursor: pointer;\n    }\n\n    .recom-author {\n        height: 20px;\n        line-height: 20px;\n        margin-top: 20px;\n        font-size: 12px;\n        color: #999;\n\n        a {\n            color: #666;\n        }\n    }\n}\n\n.comment-main {\n    font-size: 0;\n\n    .el-image {\n        width: 40px;\n        height: 40px;\n        border-radius: 100%;\n        overflow: hidden;\n    }\n\n    .comment-item {\n        display: flex;\n        padding: 10px 0;\n    }\n\n    .comment-info {\n        flex: 1;\n        padding-left: 10px;\n    }\n\n    .comment-userInfo {\n        width: 100%;\n        font-size: 0;\n    }\n\n    .comment-name {\n        font-size: 14px;\n        line-height: 14px;\n        font-weight: bold;\n    }\n\n    .comment-desc {\n        font-size: 12px;\n        color: #666;\n        line-height: 1.6;\n        padding: 5px 10px;\n        background: #f5f5f5;\n        margin: 5px 0;\n        border-radius: 3px;\n    }\n\n    .comment-date {\n        display: inline-block;\n        padding-left: 5px;\n        font-size: 12px;\n        color: #666;\n    }\n}\n\n.el-table /deep/thead th {\n    font-weight: normal;\n    background-color: #F5F7FA;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./detail.vue?vue&type=template&id=3b76e341&scoped=true&\"\nimport script from \"./detail.vue?vue&type=script&lang=js&\"\nexport * from \"./detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./detail.vue?vue&type=style&index=0&id=3b76e341&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3b76e341\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./detail.vue?vue&type=style&index=0&id=3b76e341&prod&scoped=true&lang=less&\""],"sourceRoot":""}