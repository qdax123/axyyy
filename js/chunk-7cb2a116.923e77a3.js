(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7cb2a116"],{"3dc3":function(t,s,e){"use strict";e("5bc6")},"41e4":function(t,s,e){},"5bc6":function(t,s,e){},"99bf":function(t,s,e){},b887:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"playlist"},[s("div",{staticClass:"w1200"},[s("div",{staticClass:"filter"},t._l(t.categories,(function(e,i){return s("div",{key:i,staticClass:"filter-item"},[s("div",{staticClass:"filter-title"},[t._v(t._s(e.name))]),s("div",{staticClass:"filter-box"},[t._l(e.children.slice(0,8),(function(e){return s("span",{key:e.name,class:["item-box",t.curType===e.name?"active":""]},[s("em",{on:{click:function(s){return t.selectType(e)}}},[t._v(t._s(e.name))])])})),s("el-popover",{attrs:{trigger:"click"}},[e.children.length>9?s("span",{class:["item-box","filter-more",t.moreTxt[i]?"active":""],attrs:{slot:"reference"},slot:"reference"},[s("em",[t._v(t._s(t.moreTxt[i]?t.curType:"更多")),s("i",{staticClass:"iconfont icon-arrow"})])]):t._e(),s("div",{staticClass:"filter-drop"},t._l(e.children.slice(9),(function(e){return s("span",{key:e.name,class:["item-box",t.curType===e.name?"active":""]},[s("em",{on:{click:function(s){return t.selectType(e,i)}}},[t._v(t._s(e.name))])])})),0)])],2)])})),0),s("div",{staticClass:"list-container"},[s("div",{staticClass:"list-head"},[s("h2",[t._v(t._s(t.curType)+" "),t.curType!==t.allList.name?s("em",{staticClass:"filter-close",on:{click:t.closed}},[s("i",{staticClass:"iconfont icon-closed"})]):t._e()]),s("div",{staticClass:"type"},[s("span",{class:"hot"===t.params.order?"active":"",on:{click:function(s){return t.selectOrder("hot")}}},[t._v("热门")]),s("span",{class:"new"===t.params.order?"active":"",on:{click:function(s){return t.selectOrder("new")}}},[t._v("最新")])])]),s("PlayList",{attrs:{params:t.params,isScroll:!0}})],1)])])},a=[],r=(e("14d9"),function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],staticClass:"wrapper infinite-list",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"50"}},[s("play-list",{attrs:{playList:t.list}}),t.isLoading?[s("Loading")]:t._e()],2)}),l=[],c=e("dfd5"),n=e("bf93"),o={name:"PalyList",components:{playList:c["a"],Loading:n["a"]},created(){this.getPlayList(this.params)},props:{params:{type:Object,default:()=>{}},isScroll:{type:Boolean,default:!1}},data(){return{list:[],isLoading:!0,busy:!0}},computed:{},methods:{async getPlayList(t){const{data:s}=await this.$http.playList(t);if(200!==s.code)return this.$msg.error("数据请求失败");this.list=0!==this.params.offset?[...this.list,...s.playlists]:s.playlists,this.busy=this.list.length>=s.total,this.isLoading=!this.busy},loadMore(){this.isScroll&&(this.busy=!0,this.params.offset=this.list.length)}},watch:{params:{handler(t,s){t.cat!==s.cat&&(this.list=[]),this.getPlayList(t)},deep:!0}}},u=o,p=(e("3dc3"),e("2877")),d=Object(p["a"])(u,r,l,!1,null,"2a784c70",null),h=d.exports,f={name:"PlayListWrap",components:{PlayList:h},created(){this.params.cat=this.$route.query.cat,this.getCatlist()},data(){return{sub:[],categories:[],curType:"",moreTxt:{},allList:{},params:{order:"hot",cat:"",limit:50,offset:0}}},computed:{},methods:{async getCatlist(){const{data:t}=await this.$http.catlist();if(this.sub=t.sub,200!==t.code)return this.$msg.error("数据请求失败");for(const s in t.categories){const e={name:t.categories[s]};e.children=this.sub.filter(t=>t.category===Number(s)),this.categories.push(e)}this.curType=this.$route.query.cat?this.$route.query.cat:t.all.name,this.allList=t.all,this.getMoreTxt()},selectType(t){this.$router.push({path:"playlist",query:{cat:t.name,order:this.params.order}})},closed(){this.$router.push({path:"playlist"})},selectOrder(t){this.$router.push({path:"playlist",query:{cat:this.params.cat,order:t}})},getMoreTxt(){const t=this.sub.find(t=>t.name===this.curType);if(this.moreTxt={},t){const s=this.categories[t.category].children.indexOf(t);s>=8&&(this.moreTxt[t.category]=t)}}},watch:{$route(t,s){const{cat:e,order:i}=t.query;this.curType=e||this.allList.name,this.params=Object.assign({},{order:"hot",cat:"",limit:50,offset:0},{cat:e||"",order:i||"hot"}),this.getMoreTxt()}}},m=f,y=(e("fe21"),Object(p["a"])(m,i,a,!1,null,"787903de",null));s["default"]=y.exports},dfd5:function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"playlist"},t._l(t.playList,(function(e){return s("div",{key:e.id,staticClass:"item"},[s("router-link",{staticClass:"faceImg",attrs:{to:{path:"playlist/detail",query:{id:e.id}}}},[s("el-image",{attrs:{src:e.coverImgUrl,lazy:""}},[s("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[s("i",{staticClass:"iconfont icon-placeholder"})])]),s("span",{staticClass:"playCount"},[s("i",{staticClass:"iconfont icon-playnum"}),s("em",[t._v(t._s(t.$utils.formartNum(e.playCount)))])])],1),s("div",{staticClass:"info"},[s("router-link",{staticClass:"info_name",attrs:{to:{path:"playlist/detail",query:{id:e.id}}}},[t._v(t._s(e.name)+" ")]),s("div",{staticClass:"tags"},t._l(e.tags,(function(e,i){return s("router-link",{key:i,staticClass:"tag",attrs:{to:{path:"/playlist",query:{cat:e}}}},[t._v("#"+t._s(e)+" ")])})),1)],1)],1)})),0)},a=[],r={components:{},props:["playList"],data(){return{}},computed:{},methods:{}},l=r,c=(e("eba5"),e("2877")),n=Object(c["a"])(l,i,a,!1,null,"47488a48",null);s["a"]=n.exports},eba5:function(t,s,e){"use strict";e("41e4")},fe21:function(t,s,e){"use strict";e("99bf")}}]);
//# sourceMappingURL=chunk-7cb2a116.923e77a3.js.map